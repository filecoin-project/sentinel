{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "-- Grafana --",
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "gnetId": null,
  "graphTooltip": 2,
  "id": 4,
  "links": [],
  "panels": [
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": null,
      "description": "",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "links": []
        },
        "overrides": []
      },
      "fill": 3,
      "fillGradient": 0,
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 0,
        "y": 0
      },
      "hiddenSeries": false,
      "id": 22,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": false,
        "hideEmpty": false,
        "max": true,
        "min": true,
        "rightSide": true,
        "show": false,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null as zero",
      "percentage": false,
      "pluginVersion": "7.1.5",
      "pointradius": 0.5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "Failure",
          "color": "#E02F44"
        },
        {
          "alias": "Success",
          "color": "#96D98D"
        }
      ],
      "spaceLength": 10,
      "stack": true,
      "steppedLine": false,
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": false,
          "rawSql": "SELECT\n  \"time\" AS \"time\",\n  counter - lag(counter) OVER (ORDER BY \"time\") AS \"Failure\"\nFROM lotus_message_failure\nWHERE\n  $__timeFilter(\"time\")\nORDER BY 1",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "counter"
                ],
                "type": "column"
              },
              {
                "params": [
                  "delta"
                ],
                "type": "window"
              },
              {
                "params": [
                  "Failure"
                ],
                "type": "alias"
              }
            ]
          ],
          "table": "lotus_message_failure",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamptz",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        },
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": false,
          "rawSql": "SELECT\n  \"time\" AS \"time\",\n  counter - lag(counter) OVER (ORDER BY \"time\") AS \"Success\"\nFROM lotus_message_success\nWHERE\n  $__timeFilter(\"time\")\nORDER BY 1",
          "refId": "B",
          "select": [
            [
              {
                "params": [
                  "counter"
                ],
                "type": "column"
              },
              {
                "params": [
                  "delta"
                ],
                "type": "window"
              },
              {
                "params": [
                  "Success"
                ],
                "type": "alias"
              }
            ]
          ],
          "table": "lotus_message_success",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamptz",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Messages Recieved",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "decimals": null,
          "format": "short",
          "label": "",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": false
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": null,
      "description": "Number of peers connected to the lotus node.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "links": []
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 6,
        "y": 0
      },
      "hiddenSeries": false,
      "id": 24,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": false,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "percentage": false,
      "pluginVersion": "7.1.5",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT\n  \"time\" AS \"time\",\n  gauge\nFROM lotus_peer_count\nWHERE\n  $__timeFilter(\"time\")\nORDER BY 1",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "gauge"
                ],
                "type": "column"
              }
            ]
          ],
          "table": "lotus_peer_count",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamptz",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Connected Peers Count",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": false
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "datasource": null,
      "description": "Total Tipsets/Blocks on Chain",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 12,
        "x": 12,
        "y": 0
      },
      "id": 6,
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "7.1.5",
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT\n  NOW() AS \"time\",\n  count(*) AS \"Blocks\"\nFROM \"blocks\"",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "pledged_collateral"
                ],
                "type": "column"
              }
            ]
          ],
          "table": "\"chain.economics\"",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        },
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT\n  NOW() AS \"time\",\n  max(height) AS \"Tipsets\"\nFROM \"blocks\"",
          "refId": "B",
          "select": [
            [
              {
                "params": [
                  "counter"
                ],
                "type": "column"
              }
            ]
          ],
          "table": "lotus_rpc_response_error",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        },
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT\n  NOW() AS \"time\",\n  count(cid)::float/max(height)::float AS \"Block/Tipset Ratio\"\nFROM \"blocks\"",
          "refId": "C",
          "select": [
            [
              {
                "params": [
                  "counter"
                ],
                "type": "column"
              }
            ]
          ],
          "table": "lotus_rpc_response_error",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "",
      "type": "stat"
    },
    {
      "alert": {
        "alertRuleTags": {},
        "conditions": [
          {
            "evaluator": {
              "params": [],
              "type": "no_value"
            },
            "operator": {
              "type": "and"
            },
            "query": {
              "params": [
                "A",
                "1m",
                "now"
              ]
            },
            "reducer": {
              "params": [],
              "type": "last"
            },
            "type": "query"
          }
        ],
        "executionErrorState": "keep_state",
        "for": "2m",
        "frequency": "1m",
        "handler": 1,
        "message": "Blocks production has halted on network for 2 minutes. Please investigate immediately.",
        "name": "Sustained Null Blocks",
        "noDataState": "alerting",
        "notifications": [
          {
            "uid": "F7zrp_GGk"
          }
        ]
      },
      "aliasColors": {},
      "bars": true,
      "dashLength": 10,
      "dashes": false,
      "datasource": "TimescaleDB",
      "decimals": 0,
      "description": "Number of blocks reported by network by Miner ID.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "links": []
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 5,
        "w": 20,
        "x": 0,
        "y": 4
      },
      "hiddenSeries": false,
      "id": 2,
      "interval": "30s",
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": false,
        "hideZero": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "total",
        "sortDesc": true,
        "total": true,
        "values": true
      },
      "lines": false,
      "linewidth": 1,
      "nullPointMode": "null as zero",
      "percentage": false,
      "pluginVersion": "7.1.5",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": true,
      "steppedLine": false,
      "targets": [
        {
          "format": "time_series",
          "group": [
            {
              "params": [
                "$__interval",
                "none"
              ],
              "type": "time"
            },
            {
              "params": [
                "$__interval",
                "none"
              ],
              "type": "time"
            }
          ],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "WITH \"elections\" AS (\n  SELECT\n    to_timestamp(\"timestamp\") AS \"time\",\n    miner AS \"miner\"\n  FROM \"blocks\"\n  WHERE\n    $__unixEpochFilter(\"timestamp\")\n)\nSELECT\n  $__timeGroupAlias(\"time\",$__interval,0),\n  miner AS \"metric\",\n  max(1) AS \"election\"\nFROM \"elections\"\nWHERE\n  $__timeFilter(\"time\")\nGROUP BY 1, 2\nORDER BY 1",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "miner_tag"
                ],
                "type": "column"
              },
              {
                "params": [
                  "avg"
                ],
                "type": "aggregate"
              },
              {
                "params": [
                  "miner"
                ],
                "type": "alias"
              }
            ],
            [
              {
                "params": [
                  "1"
                ],
                "type": "column"
              },
              {
                "params": [
                  "avg"
                ],
                "type": "aggregate"
              },
              {
                "params": [
                  "election"
                ],
                "type": "alias"
              }
            ]
          ],
          "table": "\"chain.block\"",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Reported Blocks",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "short",
          "label": "blocks won",
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": false
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "datasource": null,
      "description": "Time elapsed since last block found.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 30
              }
            ]
          },
          "unit": "s"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 4,
        "x": 20,
        "y": 4
      },
      "id": 4,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "7.1.5",
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT\n  NOW() AS \"time\",\n  extract(epoch from NOW() - to_timestamp(\"timestamp\")) AS \"since_last_block\"\nFROM \"blocks\"\nORDER BY 2 ASC\nLIMIT 1",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "pledged_collateral"
                ],
                "type": "column"
              }
            ]
          ],
          "table": "\"chain.economics\"",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "Time since Last Block",
      "type": "stat"
    },
    {
      "cards": {
        "cardPadding": 0,
        "cardRound": null
      },
      "color": {
        "cardColor": "#96D98D",
        "colorScale": "sqrt",
        "colorScheme": "interpolateGreens",
        "exponent": 0.8,
        "max": null,
        "mode": "opacity"
      },
      "dataFormat": "tsbuckets",
      "datasource": null,
      "description": "Duration reported by lotus between receipt and validation of a block.",
      "fieldConfig": {
        "defaults": {
          "custom": {}
        },
        "overrides": []
      },
      "gridPos": {
        "h": 10,
        "w": 17,
        "x": 0,
        "y": 9
      },
      "heatmap": {},
      "hideZeroBuckets": true,
      "highlightCards": true,
      "id": 20,
      "interval": "30s",
      "legend": {
        "show": true
      },
      "reverseYBuckets": false,
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT\n  \"time\",\n  -- \"0.01\" - LAG(\"0.01\") OVER (ORDER BY \"time\") AS \"0.01\",\n  -- \"0.05\" - LAG(\"0.05\") OVER (ORDER BY \"time\") AS \"0.05\",\n  -- \"0.1\" - LAG(\"0.1\") OVER (ORDER BY \"time\") AS \"0.1\",\n  -- \"0.3\" - LAG(\"0.3\") OVER (ORDER BY \"time\") AS \"0.3\",\n  -- \"0.6\" - LAG(\"0.6\") OVER (ORDER BY \"time\") AS \"0.6\",\n  -- \"0.8\" - LAG(\"0.8\") OVER (ORDER BY \"time\") AS \"0.8\",\n  -- \"1\" - LAG(\"1\") OVER (ORDER BY \"time\") AS \"1\",\n  -- \"2\" - LAG(\"2\") OVER (ORDER BY \"time\") AS \"2\",\n  -- \"3\" - LAG(\"3\") OVER (ORDER BY \"time\") AS \"3\",\n  -- \"4\" - LAG(\"4\") OVER (ORDER BY \"time\") AS \"4\",\n  -- \"5\" - LAG(\"5\") OVER (ORDER BY \"time\") AS \"5\",\n  -- \"6\" - LAG(\"6\") OVER (ORDER BY \"time\") AS \"6\",\n  -- \"8\" - LAG(\"8\") OVER (ORDER BY \"time\") AS \"8\",\n  -- \"10\" - LAG(\"10\") OVER (ORDER BY \"time\") AS \"10\",\n  -- \"13\" - LAG(\"13\") OVER (ORDER BY \"time\") AS \"13\",\n  -- \"16\" - LAG(\"16\") OVER (ORDER BY \"time\") AS \"16\",\n  \"20\" - LAG(\"20\") OVER (ORDER BY \"time\") AS \"20\",\n  \"25\" - LAG(\"25\") OVER (ORDER BY \"time\") AS \"25\",\n  \"30\" - LAG(\"30\") OVER (ORDER BY \"time\") AS \"30\",\n  \"40\" - LAG(\"40\") OVER (ORDER BY \"time\") AS \"40\",\n  \"50\" - LAG(\"50\") OVER (ORDER BY \"time\") AS \"50\",\n  \"65\" - LAG(\"65\") OVER (ORDER BY \"time\") AS \"65\",\n  \"80\" - LAG(\"80\") OVER (ORDER BY \"time\") AS \"80\",\n  \"100\" - LAG(\"100\") OVER (ORDER BY \"time\") AS \"100\",\n  \"130\" - LAG(\"130\") OVER (ORDER BY \"time\") AS \"130\",\n  \"160\" - LAG(\"160\") OVER (ORDER BY \"time\") AS \"160\",\n  \"200\" - LAG(\"200\") OVER (ORDER BY \"time\") AS \"200\",\n  \"250\" - LAG(\"250\") OVER (ORDER BY \"time\") AS \"250\",\n  \"300\" - LAG(\"300\") OVER (ORDER BY \"time\") AS \"300\",\n  \"400\" - LAG(\"400\") OVER (ORDER BY \"time\") AS \"400\",\n  \"500\" - LAG(\"500\") OVER (ORDER BY \"time\") AS \"500\",\n  \"650\" - LAG(\"650\") OVER (ORDER BY \"time\") AS \"650\",\n  \"800\" - LAG(\"800\") OVER (ORDER BY \"time\") AS \"800\",\n  \"1000\" - LAG(\"1000\") OVER (ORDER BY \"time\") AS \"1000\",\n  \"2000\" - LAG(\"2000\") OVER (ORDER BY \"time\") AS \"2000\",\n  \"5000\" - LAG(\"5000\") OVER (ORDER BY \"time\") AS \"5000\",\n  \"10000\" - LAG(\"10000\") OVER (ORDER BY \"time\") AS \"10000\",\n  \"20000\" - LAG(\"20000\") OVER (ORDER BY \"time\") AS \"20000\",\n  \"50000\" - LAG(\"50000\") OVER (ORDER BY \"time\") AS \"50000\",\n  \"100000\" - LAG(\"100000\") OVER (ORDER BY \"time\") AS \"100000\"\nFROM lotus_block_validation_ms\nWHERE\n  $__timeFilter(\"time\")\nORDER BY 1",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "\"0.1\""
                ],
                "type": "column"
              },
              {
                "params": [
                  "delta"
                ],
                "type": "window"
              },
              {
                "params": [
                  "0.01"
                ],
                "type": "alias"
              }
            ],
            [
              {
                "params": [
                  "\"0.3\""
                ],
                "type": "column"
              },
              {
                "params": [
                  "delta"
                ],
                "type": "window"
              },
              {
                "params": [
                  "0.05"
                ],
                "type": "alias"
              }
            ]
          ],
          "table": "lotus_block_validation_ms",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamptz",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "Block Validation Time",
      "tooltip": {
        "show": true,
        "showHistogram": true
      },
      "tooltipDecimals": 0,
      "type": "heatmap",
      "xAxis": {
        "show": true
      },
      "xBucketNumber": 60,
      "xBucketSize": "",
      "yAxis": {
        "decimals": null,
        "format": "ms",
        "logBase": 1,
        "max": null,
        "min": null,
        "show": true,
        "splitFactor": null
      },
      "yBucketBound": "lower",
      "yBucketNumber": 24,
      "yBucketSize": null
    },
    {
      "aliasColors": {},
      "bars": true,
      "dashLength": 10,
      "dashes": false,
      "datasource": null,
      "description": "Total message size found.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "links": []
        },
        "overrides": []
      },
      "fill": 5,
      "fillGradient": 0,
      "gridPos": {
        "h": 5,
        "w": 7,
        "x": 17,
        "y": 9
      },
      "hiddenSeries": false,
      "id": 25,
      "interval": "45m",
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": false,
        "max": true,
        "min": true,
        "rightSide": false,
        "show": true,
        "total": true,
        "values": true
      },
      "lines": false,
      "linewidth": 1,
      "nullPointMode": "null as zero",
      "percentage": false,
      "pluginVersion": "7.1.5",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "format": "time_series",
          "group": [
            {
              "params": [
                "$__interval",
                "none"
              ],
              "type": "time"
            }
          ],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "WITH message_per_epoch AS (\n\tSELECT\n\t  to_timestamp(\"b\".\"timestamp\") AS \"time\",\n\t  count(*) AS \"total\"\n\tFROM \"messages\" m\n\tJOIN \"block_messages\" bm ON m.cid = bm.message\n\tJOIN \"blocks\" b ON bm.block = b.cid\n\tWHERE\n\t   $__unixEpochFilter(\"b\".\"timestamp\")\n\tGROUP BY 1\n\tORDER BY 1\n)\nSELECT\n  $__timeGroupAlias(\"time\",'30s'),\n  total AS \"Total Messages\"\nFROM message_per_epoch\nWHERE\n  $__timeFilter(\"time\")\n",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "pledged_collateral"
                ],
                "type": "column"
              },
              {
                "params": [
                  "avg"
                ],
                "type": "aggregate"
              },
              {
                "params": [
                  "pledged_collateral"
                ],
                "type": "alias"
              }
            ]
          ],
          "table": "\"chain.economics\"",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Total Messages",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "decimals": 0,
          "format": "none",
          "label": "",
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": false
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": null,
      "description": "Shows message sizes as each message is included on-chain.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 5,
        "w": 7,
        "x": 17,
        "y": 14
      },
      "hiddenSeries": false,
      "id": 8,
      "interval": "30s",
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": false,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 2,
      "nullPointMode": "null as zero",
      "percentage": false,
      "pluginVersion": "7.1.5",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "Maximum",
          "fillBelowTo": "Minimum",
          "lines": false
        },
        {
          "alias": "Average",
          "color": "rgb(223, 239, 255)"
        },
        {
          "alias": "Minimum",
          "lines": false
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "format": "time_series",
          "group": [
            {
              "params": [
                "$__interval",
                "none"
              ],
              "type": "time"
            }
          ],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "WITH message_sizes AS (\n\tSELECT \n\t\tto_timestamp(b.timestamp) AS \"time\",\n\t\tm.size_bytes AS \"message_bytes\"\n\tFROM \"messages\" m\n\tJOIN \"block_messages\" bm ON m.cid = bm.message\n\tJOIN \"blocks\" b ON b.cid = bm.block\n\tWHERE\n\t  $__unixEpochFilter(\"b\".\"timestamp\")\n)\nSELECT\n  $__timeGroupAlias(\"message_sizes\".\"time\",$__interval),\n  min(message_bytes) AS \"Minimum\",\n  avg(message_bytes) AS \"Average\",\n  max(message_bytes) AS \"Maximum\",\n  sum(message_bytes) AS \"Sum\"\nFROM \"message_sizes\"\nGROUP BY 1\nORDER BY 1;",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "pledged_collateral"
                ],
                "type": "column"
              },
              {
                "params": [
                  "avg"
                ],
                "type": "aggregate"
              },
              {
                "params": [
                  "pledged_collateral"
                ],
                "type": "alias"
              }
            ]
          ],
          "table": "\"chain.economics\"",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Message Size",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "decimals": 0,
          "format": "decbytes",
          "label": "bytes",
          "logBase": 10,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": "count",
          "logBase": 1,
          "max": null,
          "min": null,
          "show": false
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": null,
      "fieldConfig": {
        "defaults": {
          "custom": {}
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 5,
        "w": 24,
        "x": 0,
        "y": 19
      },
      "hiddenSeries": false,
      "id": 27,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "percentage": false,
      "pluginVersion": "7.1.5",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "miner_count",
          "yaxis": 2
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "format": "time_series",
          "group": [],
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "-- total network power over time\nwith epoch as (\n    select distinct on (height)\n        time_bucket('30s', to_timestamp(blocks.timestamp)) as \"time\",\n        --$__timeGroup(blocks.timestamp, '1h'),\n        spi.state_root\n    from blocks\n    join sector_precommit_info spi on height = spi.precommit_epoch\n    where to_timestamp(blocks.timestamp) > $__timeFrom()\n    AND to_timestamp(blocks.timestamp) < $__timeTo()\n    group by blocks.timestamp, spi.state_root, height\n    order by height, time desc\n)\nselect\n    epoch.time,\n    miner_count,\n    total_raw_bytes_power::numeric,\n    total_qa_bytes_power::numeric\nfrom chain_power\njoin epoch on epoch.state_root = chain_power.state_root\norder by time desc;",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "counter"
                ],
                "type": "column"
              }
            ]
          ],
          "table": "lotus_block_failure",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Total Network Power over Time",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "decbytes",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": true,
      "dashLength": 10,
      "dashes": false,
      "datasource": null,
      "decimals": 0,
      "description": "Number of actor messages executed grouped by exit code.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "links": []
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 7,
        "w": 24,
        "x": 0,
        "y": 24
      },
      "hiddenSeries": false,
      "id": 11,
      "interval": "3s",
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": false,
        "max": true,
        "min": true,
        "rightSide": true,
        "show": true,
        "sort": "total",
        "sortDesc": true,
        "total": true,
        "values": true
      },
      "lines": false,
      "linewidth": 1,
      "nullPointMode": "null as zero",
      "percentage": false,
      "pluginVersion": "7.1.5",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": true,
      "steppedLine": false,
      "targets": [
        {
          "format": "time_series",
          "group": [
            {
              "params": [
                "$__interval",
                "none"
              ],
              "type": "time"
            }
          ],
          "hide": false,
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "WITH actor_results as (\n\tSELECT\n\t\ttime_bucket('30s', to_timestamp(\"b\".\"timestamp\")) AS \"time\",\n\t\tconcat(a.code,'/',m.method,' -> ',r.exit) AS \"msg\"\n\tFROM \"receipts\" r\n\tJOIN \"messages\" m ON r.msg = m.cid\n\tJOIN \"block_messages\" bm ON m.cid = bm.message\n\tJOIN \"blocks\" b ON bm.block = b.cid\n\tJOIN \"actors\" a ON r.state = a.stateroot AND m.to = a.id\n  WHERE\n    $__unixEpochFilter(\"b\".\"timestamp\")\n\tORDER BY b.height DESC\n) SELECT\n\t$__timeGroupAlias(\"time\",$__interval, 0),\n\tmsg,\n\tcount(msg)\nFROM actor_results\nGROUP BY 1, 2\nORDER BY 1, 2",
          "refId": "A",
          "select": [
            [
              {
                "params": [
                  "pledged_collateral"
                ],
                "type": "column"
              },
              {
                "params": [
                  "avg"
                ],
                "type": "aggregate"
              },
              {
                "params": [
                  "pledged_collateral"
                ],
                "type": "alias"
              }
            ]
          ],
          "table": "\"chain.economics\"",
          "timeColumn": "\"time\"",
          "timeColumnType": "timestamp",
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            }
          ]
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Actor Messages with Exitcode",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "decimals": null,
          "format": "short",
          "label": "",
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    }
  ],
  "refresh": "15m",
  "schemaVersion": 26,
  "style": "dark",
  "tags": [],
  "templating": {
    "list": []
  },
  "time": {
    "from": "now-30m",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
  },
  "timezone": "browser",
  "title": "Sentinel (v0.2) (Space Race)",
  "uid": "sentinel_v0_2",
  "version": 12
}
